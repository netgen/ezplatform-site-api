{% set params = { "objectParameters": {} } %}
{% if embedParams.config is defined  %}
    {% set params = params|merge( { "objectParameters": embedParams.config } ) %}
{% endif %}
{% if embedParams.link is defined  %}
    {% set params = params|merge( { "linkParameters": embedParams.link } ) %}
{% endif %}
{% if embedParams.dataAttributes is defined %}
    {# Note: intentionally using here new convention for parameter names #}
    {% set params = params|merge( { "data_attributes": embedParams.dataAttributes } ) %}
{% endif %}
{% if embedParams.class is defined %}
    {% set params = params|merge( { "class": embedParams.class } ) %}
{% endif %}

{{ fos_httpcache_tag('relation-location-' ~ embedParams.id) }}
{% if ezpublish.configResolver.getParameter('ng_richtext_embed_without_subrequest') == true %}
    {{ ng_view_content_embedded(embedParams.viewType, params|merge( { "locationId": embedParams.id } )) }}
{% else %}
    {{ render(
        controller(
            "ng_content:embedAction",
            {
                "locationId": embedParams.id,
                "viewType": embedParams.viewType,
                "params": params,
                "layout": false
            }
        )
    ) }}
{% endif %}
